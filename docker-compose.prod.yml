version: '3.6'

services:
  web:
    environment:
      - DJANGO_ADMINS
      - DJANGO_ALLOWED_HOSTS
      - DJANGO_CSRF_COOKIE_SECURE
      - DJANGO_DATABASE_SSL_REQUIRE
      - DJANGO_DEBUG
      - DJANGO_DEFAULT_FROM_EMAIL
      - DJANGO_EMAIL_HOST
      - DJANGO_EMAIL_HOST_PASSWORD
      - DJANGO_EMAIL_HOST_USER
      - DJANGO_EMAIL_PORT
      - DJANGO_EMAIL_USE_SSL
      - DJANGO_EMAIL_USE_TLS
      - DJANGO_HIDDEN_ROOT
      - DJANGO_ONETIMEPASS_ALLOWED_DOMAINS
      - DJANGO_SECURE_HSTS_SECONDS
      - DJANGO_SECURE_PROXY_SSL_HEADER
      - DJANGO_SECURE_SSL_REDIRECT
      - DJANGO_SESSION_COOKIE_SECURE
      - DJANGO_SUPERUSER_EMAIL
      - DJANGO_SUPERUSER_PASSWORD
      - DJANGO_SUPERUSER_USERNAME
      - PORT
      - POSTGRES_DATABASE
      - POSTGRES_HOST
      - POSTGRES_USER
      - BASE_URL

  proxy:
    image: nginx:1.21
    depends_on:
      - web
    volumes:
      - ./default.conf:/etc/nginx/conf.d/default.conf
    ports:
      - '8005:80'
